# Training Configuration
training:
  max_epoch: 100002
  checkpoint_freq: 1000

environment:
  # Skeleton and Character
  skeleton:
    file: "@data/skeleton_gaitnet_narrow_model.xml"
    actuator: "mass_lower"  # pd, torque, muscle, mass, mass_lower
    kp: 200
    kv: 40
    damping: 0.1

  # Ground/World
  ground:
    file: "@data/ground.xml"

  # Motion Reference
  motion:
    type: "h5"  # h5, bvh, npz
    file: "@data/motion/walk.h5"
    cyclic: true
    height_calibration:
      enabled: true
      strict: true

  # Muscle System
  muscle:
    file: "@data/muscle_distribute_lower_only.xml"
    mesh_lbs_weight: false
    use_velocity_force: false
    use_joint_state: true
    pose_optimization:
      enabled: true
      rot: "one_foot"  # one_foot or mid_feet

  # Simulation Timing
  simulation:
    sim_hz: 480
    control_hz: 30
    inference_per_sim: 1

  # Action and Control
  action:
    scale: 0.04
    residual: true
    time_warping: 0.001  # -1 means disabled

  # Advanced Behavior
  advanced:
    enforce_symmetry: true
    hard_phase_clipping: true
    soft_phase_clipping: false
    torque_clipping: false
    include_jtp_in_spd: false
    use_normalized_param_state: false
    learning_std: false
    stance_learning: false

  # Reward System
  reward:
    type: "gaitnet"  # deepmimic, gaitnet, scadiver
    eoe_type: "tuple"  # tuple or time

    # Metabolic configuration
    metabolic:
      type: "A"  # A, A2, MA, MA2
      weight: 0.05
      scale: 1.0
      multiplicative: false  # if true, multiplies with main reward term
      torque_energy:
        coeff: 1.0  # coefficient for torque energy calculation

    # Locomotion rewards (for gaitnet)
    locomotion:
      head_linear_acc_weight: 4.0
      head_rot_weight: 4.0
      step_weight: 2.0
      avg_vel_weight: 6.0

    # Penalty/auxiliary rewards
    knee_pain:
      weight: 1.0
      scale: 1.0
      multiplicative: false  # if true, multiplies with main reward term

  # Parameterization for training
  parameters:
    gait:
      stride:
        min: 0.75
        max: 1.25
        default: 1.0
        sampling: "uniform"
      cadence:
        min: 0.75
        max: 1.25
        default: 1.0
        sampling: "uniform"

    skeleton:
      global: {min: 0.85, max: 1.0, sampling: "uniform"}
      FemurL: {min: 0.9, max: 1.0}
      FemurR: {min: 0.9, max: 1.0}
      TibiaL: {min: 0.9, max: 1.0}
      TibiaR: {min: 0.9, max: 1.0}
      ArmL: {min: 0.9, max: 1.0}
      ArmR: {min: 0.9, max: 1.0}
      ForeArmL: {min: 0.9, max: 1.0}
      ForeArmR: {min: 0.9, max: 1.0}

    torsion:
      femur_l:
        min: -0.55
        max: 0.55
        default: 0.0
        sampling: "uniform"
      femur_r:
        min: -0.55
        max: 0.55
        default: 0.0
        sampling: "uniform"
